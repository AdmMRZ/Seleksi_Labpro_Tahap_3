{% extends 'base.html' %}

{% block title %}{{ course.title }} - Gro Academy{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8"> 

            {% if course.thumbnail_image %}
                <img src="{{ course.thumbnail_image }}" alt="{{ course.title }}" class="img-fluid rounded mb-4">
            {% endif %}
 
            <h1 class="text-center mb-4" style="color: var(--primary-color); font-weight: 600;">{{ course.title }}</h1>
            <p class="text-muted text-center">{{ course.description }}</p>
            <p class="text-center"><strong>Instructor:</strong> {{ course.instructor }}</p>
            <p class="text-center"><strong>Price:</strong> IDR {{ course.price }}</p>
            <p class="text-center"><strong>Topics:</strong> {{ course.topics|join:", " }}</p>
 
            <button 
                id="buy-course-btn" 
                class="btn btn-primary w-100 py-2 rounded-3"
                data-is-authenticated="{{ user.is_authenticated|yesno:'true,false' }}">
                Buy Course
            </button>
 
            {% if error %}
                <div class="alert alert-danger text-center mt-3">{{ error }}</div>
            {% endif %}
            {% if success %}
                <div class="alert alert-success text-center mt-3">{{ success }}</div>
            {% endif %}
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const buyCourseBtn = document.getElementById('buy-course-btn');

        if (buyCourseBtn) {
            buyCourseBtn.addEventListener('click', function () {
                const isAuthenticated = buyCourseBtn.getAttribute('data-is-authenticated') === 'true';

                if (!isAuthenticated) {
                    alert('Please login first.');
                } else {
                    alert('Course purchased successfully!');

                }
            });
        }
    });
</script>
{% endblock %}